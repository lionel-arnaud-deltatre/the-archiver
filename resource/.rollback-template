name: Rollback <device_type> - <env>

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Select version to rollback'
        required: true
        type: choice
        options:
          <versions_placeholder>

jobs:
  rollback:
    runs-on: ubuntu-latest
    steps:
      - name: Rollback to Selected Version
        run: echo "Rolling back to ${{ github.event.inputs.version }}"

      - name: Fetch archive and store it
        id: fetcharchive
        uses: lionel-arnaud-deltatre/the-archiver@main
        with:
          actionType: "fetch-archive"
          version: ${{ github.event.inputs.version }}
          appName: <project_name>
          deviceType: <device_type>
          environment: <env>
        env:
          ARCHIVER_AWS_ACCESS_KEY_ID: ${{ secrets.ARCHIVER_AWS_ACCESS_KEY_ID }}
          ARCHIVER_AWS_SECRET_ACCESS_KEY: ${{ secrets.ARCHIVER_AWS_SECRET_ACCESS_KEY }}

      - name: Store the archive 
        uses: actions/upload-artifact@v4
        with:
          name: zipped-archived
          path: temp
