name: Rollback <target>

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Select version to rollback'
        required: true
        type: choice
        options:
          <versions_placeholder>

jobs:
  rollback:
    runs-on: ubuntu-latest
    steps:
      - name: Rollback to Selected Version
        run: echo "Rolling back to ${{ github.event.inputs.version }}"

      - name: Fetch artifact and store it
        id: fetcharchive
        uses: lionel-arnaud-deltatre/the-archiver@main
        with:
          actionType: "fetch-archive"
          version: ${{ github.event.inputs.version }}
          appName: <project_name>
          deviceType: <device_type>
          environment: "${{ github.event.inputs.environment }}"
          tempPath: "temp"
        env:
          ARCHIVER_AWS_ACCESS_KEY_ID: ${{ secrets.ARCHIVER_AWS_ACCESS_KEY_ID }}
          ARCHIVER_AWS_SECRET_ACCESS_KEY: ${{ secrets.ARCHIVER_AWS_SECRET_ACCESS_KEY }}
          GITHUB_TOKEN: ${{ secrets.ARCHIVER_PAT }}